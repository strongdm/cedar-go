// Global type definitions that reference each other
type Coordinate = {
	x: Long,
	y: Long,
};

type Location = {
	position: Coordinate,
	name: String,
};

// Global entity that uses global types
entity Place {
	location: Location,
};

// Enum at global level
entity GlobalStatus enum ["active", "inactive", "pending"];

namespace OrgA {
	// Type within namespace
	type Office = {
		building: String,
		floor: Long,
	};

	// Type that references another type in the same namespace
	type Employee = {
		name: String,
		office: Office,
	};

	// Entity that uses namespace-local type
	entity User {
		info: Employee,
	};

	// Enum within namespace
	entity Role enum ["admin", "member", "guest"];

	// Entity hierarchy
	entity Group;
	entity Team in [Group];

	// Actions with appliesTo
	action View appliesTo {
		principal: [User, Team],
		resource: Place,
		context: {
			reason: String,
		},
	};

	action Edit appliesTo {
		principal: User,
		resource: Place,
	};
}

namespace OrgB {
	entity Member;

	// Action that references entities from another namespace and global entities
	action Access appliesTo {
		principal: [Member, OrgA::User],
		resource: Place,
	};
}

// Top-level action
action GlobalView appliesTo {
	principal: [OrgA::User, OrgB::Member],
	resource: Place,
};
